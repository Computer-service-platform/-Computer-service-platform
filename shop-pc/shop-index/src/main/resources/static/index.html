<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8" />
<title>首页</title>
<link href="css/style.css" type="text/css" rel="stylesheet" />
<script src="js/jquery-1.7.min.js" type="text/javascript"></script>
<script src="js/common.js"  type="text/javascript"></script>
<script>
    $(function(){   
    $('a[href*=#],area[href*=#]').click(function() {
        if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
            var $target = $(this.hash);
            $target = $target.length && $target || $('[name=' + this.hash.slice(1) + ']');
            if ($target.length) {
                var targetOffset = $target.offset().top;
                $('html,body,.div1').animate({
                    scrollTop: targetOffset
                },1000);
                return false;
            }
        }
    });
})
</script>
</head>
<body class="index">
<!--  <div class="top_ad"><div class="w1200"><a href="#" id="close"></a></div></div>-->
<div id="jm_top">
<div class="top">
	<div class="w1200">
		<div class="left" v-if="onlogin"><em>[{{user.nickName}}]&nbsp;&nbsp;&nbsp;</em>您好，欢迎光临易易城！<a href="javascript:void(0)" @click="out()">[注销]</a>
			
		</div>
		<div class="left" v-if="outlogin"><em>[{{user.nickName}}]&nbsp;&nbsp;&nbsp;</em>您好，欢迎光临易易城！<a href="login.html">[登录]</a> <a href="reg.html">[注册]</a>
			
		</div>
        <div class="right"><a href="member.html">我的会员中心</a>|<a href="#">服务中心</a>|<a href="#">在线客服</a>|<a href="shopcar.html">购物车<b>{{goodsCount}}</b>件</a></div>
        <div class="clear"></div>
    </div>
</div>
<div class="head">
	<div class="w1200">
    	<div class="logo"><a href="#"></a></div>
        <div class="search">
        	<form action="#" class="form">
        		<input type="text" name="keyword" class="txt" placeholder="输入商品关键字"/>
                <input type="button" value="搜索" class="sub" @click="find()"/>
            </form>
	    </div>
        <div class="s_r">
        	<dl>
            	<dt><a href="shopcar.html">购物车<p><span>{{goodsCount}}</span></p></a></dt>
                <dd>客服电话：<b>400-0139-038</b></dd>
            </dl>
        </div>
        <div class="clear"></div>
    </div>
</div> 
</div>

<div class="menu" id="jm_menu">
	<div class="w1200">
    	<div class="item" id="nav"><a href="#" class="nav">全部商品分类</a>
        	<div class="nav_son" style="min-height: 85px;">
            	<ul v-for="value in types">
                	<li class="li01"><a :href="'product.html#tnos='+value.tno" v-if="value.status==1">{{ value.tname }}</a></li>
                </ul>
         
            </div>
        </div>
    </div>
</div>

<script type="text/javascript">
$(document).ready(function(e) {

    $('#slider li').eq(0).show();
	var lenThumb = $('#slider li').length;
	for(var i=1;i<=lenThumb;i++){
		$('#num').append('<span>'+i+'</span>');
	}
	$('#num span').eq(0).addClass('on');
	var len = $('#num span').length;
	var index = 0;

	$('#num span').click(function(){
		index = $('#num span').index(this);
		picShow(index);
	});
	var playPic = setInterval(function(){
		picShow(index);
		index++;
		if(index==len){index=0}
	},3000);
	function picShow(i){
		$('#slider li').eq(i).stop(true,true).fadeIn().siblings().fadeOut();
		$('#num > span').eq(i).addClass('on').siblings().removeClass('on');
	}

});
</script>
<div class="banner">
	<ul id="slider">
        <li style="background:url(images/home/banner.jpg) no-repeat center;height:100%;width:100%;"><a href="#"></a></li>
        <li style="background:url(images/home/banner1.jpg) no-repeat center;height:100%;width:100%;"><a href="#"></a></li>
        <li style="background:url(images/home/banner2.jpg) no-repeat center;height:100%;width:100%;"><a href="#"></a></li>
    </ul>
    
    <div class="w_auto">
        <div class="clearfix"></div>
        <div id="num" class="point"></div>
    </div>
</div>

<div class="w1201">
	<a name="a01"></a>
	<div class="idx01">
    	<div class="rollBox">
            <dl>
                <dt><b>限时抢购</b><span>让生活精彩不停</span><p><img onMouseDown="ISL_GoDown()" onMouseUp="ISL_StopDown()" onMouseOut="ISL_StopDown()"  class="img1" src="images/home/ico13.jpg" width="23" height="23" />
                    <img  onmousedown="ISL_GoUp()" onMouseUp="ISL_StopUp()" onMouseOut="ISL_StopUp()"  class="img2" src="images/home/ico14.jpg" width="23" height="23" /></p></dt>
                <dd>
                    <div class="Cont" id="ISL_Cont">
                      <div class="ScrCont">
                         <div id="List1">
                            <!-- 图片列表 begin -->
                           <ul>
                               <li class="pic">
                                   <p class="p01">电脑维修</p>
                                   <p class="p02">
                                      <font>￥</font><b style="font-size:20px;">20元上门费</b><br />
                                      <span>24小时内上门服务<br/>tel:15151031612</span>
                                      <a href="javascript:void(0)" class="buy" onclick="buy(1)">立即预约 ></a>
                                   </p>
                                   <img height="185px" width="150px" src="images/img/img.png"/>
                               </li>
                                <li class="pic">
                                   <p class="p01">数据恢复</p>
                                   <p class="p02">
                                      <font>￥</font><b style="font-size:20px;">30元上门费</b><br />
                                      <span>12小时内上门服务<br/>tel:15413541554</span>
                                      <a href="javascript:void(0)" class="buy" onclick="buy(2)">立即预约 ></a>
                                   </p>
                                   <img height="185px" width="150px"  src="images/img/img3.png"/>
                               </li>
                               <li class="pic">
                                   <p class="p01">系统重装</p>
                                   <p class="p02">
                                      <font>￥</font><b style="font-size:20px;">10元上门费</b><br />
                                      <span>48小时内上门服务<br />tel:15616516516</span>
                                      <a href="javascript:void(0)" class="buy" onclick="buy(3)">立即预约 ></a>
                                   </p>
                                   <img src="images/img/img2.png" height="185px" width="150px"/>
                               </li>
                           </ul>
                     
                            <!-- 图片列表 end -->
                           </div>
                          <div id="List2"></div>
                      </div>
                   </div>
                </dd>
            </dl>
        </div>
    </div>
    
    <a name="a02"></a>
    <div id="jm_type" >
	    <div class="idx02" v-for="(type,index) in types" v-if="type.status==1">
	    	<dl >
	        	<dt>{{ type.tname }}</dt>
	            <dd style="padding-left: 0px;">
	            	<div style="padding: 0;width:599px;" class="item big" >
	                    <img style="right: 0px;" :src="type.pic" height="280px" width="599px"/>
	                </div>
	                <div v-for="good in goodVOs" v-if="good.tno==type.tno">
		                <div class="item">
		                	<a :href="'product_show.html#'+good.sizeno" class="title">{{good.gname}}&nbsp;{{good.size}}</a>
		                    <p><font>￥</font>{{good.price}}.<font>00</font></p>
		                    <a href="javascript:void(0)" @click="add(good.sizeno)" class="buy"></a>
		                    <img :src="good.showPic" height="185px" width="150px"/>
		                </div>
	                </div>
	                <div class="clear"></div>
	            </dd>
	        </dl>
	    </div>
    </div>
</div>



<!--footer-->
<div class="footer">
	<div class="f_bz">
    	<div class="w1200">
            <dl class="dl01">
                <dt>正品保证</dt>
                <dd>正品护航  购物无忧</dd>
            </dl>
            <dl class="dl02">
                <dt>你消费 我买单</dt>
                <dd>返现购物商城</dd>
            </dl>
            <dl class="dl03">
                <dt>品类丰富</dt>
                <dd>品类齐全 轻松购物</dd>
            </dl>
            <dl class="dl04">
                <dt>特色服务体验</dt>
                <dd>为您呈现不一样的服务</dd>
            </dl>
            <div class="clear"></div>
        </div>
    </div>
	<div class="f_nav">
    	<div class="w1200">
            <dl>
                <dt>新手指南</dt>
                <dd>
                    <a href="#">注册新用户</a>
                    <a href="#">商品订购流程</a>
                    <a href="#">会员注册协议</a>
                </dd>
            </dl>
            <dl>
                <dt>付款方式</dt>
                <dd>
                    <a href="#">支付宝支付</a>
                    <a href="#">网上银行支付</a>
                    <a href="#">货到付款</a>
                </dd>
            </dl>
            <dl>
                <dt>常见问题</dt>
                <dd>
                    <a href="#">订单状态</a>
                    <a href="#">发票说明</a>
                </dd>
            </dl>
            <dl>
                <dt>售后服务</dt>
                <dd>
                    <a href="#">退换货政策</a>
                    <a href="#">退换货流程</a>
                    <a href="#">退款说明</a>
                    <a href="#">退换货申请</a>
                </dd>
            </dl>
            <dl>
                <dt>客服中心</dt>
                <dd>
                    <a href="#">常见问题</a>
                    <a href="#">联系客服</a>
                    <a href="#">投诉与建议</a>
                </dd>
            </dl>
            <div class="ewm"><img src="images/home/ico35.png"/></div>
            <div class="ewm"><img src="images/home/ico38.png"/></div>
            <div class="clear"></div>
        </div>
    </div>
    <div class="w1200">
        <div class="bottom">
            <a href="#">关于我们</a>|<a href="#">帮助中心</a>|<a href="#">法律声明</a>|<a href="#">用户协议</a>|<a href="#">联系我们</a>|<a href="#">人才招聘</a>|<a href="#">站点地图</a>
           
            <p>网络文化经营许可证：粤网文[2015]0295-065号<br />© 2015 深圳易易城科技网络有限公司. 粤ICP备15042543号</p>
            <p class="p02"><img src="images/home/ico25.jpg"/><img src="images/home/ico26.jpg"/><img src="images/home/ico27.jpg"/><img src="images/home/ico36.jpg"/><img src="images/home/ico37.jpg"/></p>
        </div>
    </div>
</div>
<!--float_right-->
<div class="float">
	<ul>
    	<li><a href="shopcar.html" class="a01"></a></li>
    </ul>
</div>
<!--float_left-->
<div class="float2">
	<ul>
    	<li><a href="#a01" class="a01 on" id="idx01">限时抢购</a></li>
        <li><a href="#a02" class="a02" id="idx02"></a></li>
        <li><a href="#a03" class="a03" id="idx03"></a></li>
        <li><a href="#a04" class="a04" id="idx04"></a></li>
        <li><a href="#a05" class="a05" id="idx05"></a></li>
        <li><a href="#a06" class="a06" id="idx06"></a></li>
    </ul>
</div>
<script type="text/javascript" src="js/vue.min.js"></script>
<script type="text/javascript" src="js/axios.min.js"></script>
<script type="text/javascript" src="js/qs.js"></script>
<script language="javascript" type="text/javascript">
$(function () {
        var dv = $(".idx01").offset().top;
		
		var dv3 = $("#idx03").offset().top;
		var dv4 = $("#idx04").offset().top;
		var dv5 = $("#idx05").offset().top;
		var dv6 = $("#idx06").offset().top;
		window.onscroll=function(){
			if(dv<document.body.scrollTop)
			{
				$(".float2 a").removeClass("on");
				$(".float2 .a01").addClass("on");
				
			}
			
			if(dv3<document.body.scrollTop)
			{
				$(".float2 a").removeClass("on");
				$(".float2 .a03").addClass("on");
			}
			if(dv4<document.body.scrollTop)
			{
				$(".float2 a").removeClass("on");
				$(".float2 .a04").addClass("on");
			}
			if(dv5<document.body.scrollTop)
			{
				$(".float2 a").removeClass("on");
				$(".float2 .a05").addClass("on");
			}
			if(dv6<document.body.scrollTop)
			{
				$(".float2 a").removeClass("on");
				$(".float2 .a06").addClass("on");
			}
		}
    });
</script>
<script language="javascript" type="text/javascript">
<!--//--><![CDATA[//><!--
//图片滚动列表 mengjia 070816
var Speed = 10; //速度(毫秒)
var Space = 10; //每次移动(px)
var PageWidth = 404; //翻页宽度
var fill = 0; //整体移位
var MoveLock = false;
var MoveTimeObj;
var Comp = 0;
var AutoPlayObj = null;
GetObj("List2").innerHTML = GetObj("List1").innerHTML;
GetObj('ISL_Cont').scrollLeft = fill;
GetObj("ISL_Cont").onmouseover = function(){clearInterval(AutoPlayObj);}
GetObj("ISL_Cont").onmouseout = function(){AutoPlay();}
AutoPlay();
function GetObj(objName){if(document.getElementById){return eval('document.getElementById("'+objName+'")')}else{return eval

('document.all.'+objName)}}
function AutoPlay(){ //自动滚动
clearInterval(AutoPlayObj);
AutoPlayObj = setInterval('ISL_GoDown();ISL_StopDown();',5000); //间隔时间
}
function ISL_GoUp(){ //上翻开始
if(MoveLock) return;
clearInterval(AutoPlayObj);
MoveLock = true;
MoveTimeObj = setInterval('ISL_ScrUp();',Speed);
}
function ISL_StopUp(){ //上翻停止
clearInterval(MoveTimeObj);
if(GetObj('ISL_Cont').scrollLeft % PageWidth - fill != 0){
Comp = fill - (GetObj('ISL_Cont').scrollLeft % PageWidth);
CompScr();
}else{
MoveLock = false;
}
AutoPlay();
}
function ISL_ScrUp(){ //上翻动作
if(GetObj('ISL_Cont').scrollLeft <= 0){GetObj('ISL_Cont').scrollLeft = GetObj

('ISL_Cont').scrollLeft + GetObj('List1').offsetWidth}
GetObj('ISL_Cont').scrollLeft -= Space ;
}
function ISL_GoDown(){ //下翻
clearInterval(MoveTimeObj);
if(MoveLock) return;
clearInterval(AutoPlayObj);
MoveLock = true;
ISL_ScrDown();
MoveTimeObj = setInterval('ISL_ScrDown()',Speed);
}
function ISL_StopDown(){ //下翻停止
clearInterval(MoveTimeObj);
if(GetObj('ISL_Cont').scrollLeft % PageWidth - fill != 0 ){
Comp = PageWidth - GetObj('ISL_Cont').scrollLeft % PageWidth + fill;
CompScr();
}else{
MoveLock = false;
}
AutoPlay();
}
function ISL_ScrDown(){ //下翻动作
if(GetObj('ISL_Cont').scrollLeft >= GetObj('List1').scrollWidth){GetObj('ISL_Cont').scrollLeft =

GetObj('ISL_Cont').scrollLeft - GetObj('List1').scrollWidth;}
GetObj('ISL_Cont').scrollLeft += Space ;
}
function CompScr(){
var num;
if(Comp == 0){MoveLock = false;return;}
if(Comp < 0){ //上翻
if(Comp < -Space){
   Comp += Space;
   num = Space;
}else{
   num = -Comp;
   Comp = 0;
}
GetObj('ISL_Cont').scrollLeft -= num;
setTimeout('CompScr()',Speed);
}else{ //下翻
if(Comp > Space){
   Comp -= Space;
   num = Space;
}else{
   num = Comp;
   Comp = 0;
}
GetObj('ISL_Cont').scrollLeft += num;
setTimeout('CompScr()',Speed);
}
}
//--><!]]>
</script>
<script type="text/javascript">
let yc_login=new Vue({
	el:"#jm_top",//对应div的id,即这个vue的作用域
	data:{
		onlogin:false,
		outlogin:true,
		user:{},
		carts:[],//{}	
		goodsCount:0
	},
	mounted:function(){//数据挂载之前，相当于jquery中的$(function(){}),页面加载完成
		axios({
			url:'member.action?op=check',
			method:'get'
		}).then(result=>{
			if(result.data.member){//说明登录了
				this.onlogin=true;
				this.outlogin=false;
				
				this.user=result.data.member;
				
				if(result.data.carts){
					this.carts=result.data.carts;
					this.goodsCount=result.data.carts.length;
				}
			}else{
				this.onlogin=false;
				this.outlogin=true;
			}
		});	
	},
	methods:{
		out:function(){
			axios({url:'member.action?op=out',method:'get'})
			.then(result=>{
				let data=result.data;
				if(data==1){
					location.href='login.html';
				}else{
					alert('退出失败！！');
					return ;
				}
			});
		},
		find:function(){
			var keyword=$.trim($('input[name="keyword"]').val());
			let tnos=new Array();
			axios({
				url:'GoodTypeServlet.action?op=findTno',
				method:'get',
				params:{
					gname:keyword
				}
			}).then(result=>{
				if(result.data){
					result.data.forEach((item,index)=>{
						tnos.push(item.tno);
					});
				}
				let str=qs.stringify({tnos:tnos});
				location.href="product.html#"+str;
			});
		}
	}
});
let yc_menu=new Vue({
	el:"#jm_menu",//对应div的id,即这个vue的作用域
	data:{
		types: {}
	},
	mounted:function(){//数据挂载之前，相当于jquery中的$(function(){}),页面加载完成
		axios({
			url:'GoodTypeServlet.action?op=find',
			method:'get',
			params:{}
		}).then(result=>(this.types = result.data))
	      .catch(function (error) { // 请求失败处理
	          console.log(error);
	    });
	}
});
let jm_type=new Vue({
	el:"#jm_type",//对应div的id,即这个vue的作用域
	data:{
		types:{},
		goodVOs:{}
	},
	mounted:function(){//数据挂载之前，相当于jquery中的$(function(){}),页面加载完成
		
		axios({
			url:'GoodTypeServlet.action?op=find',
			method:'get',
			params:{}
		}).then(result=>(this.types = result.data))
	      .catch(function (error) { // 请求失败处理
	          console.log(error);
	      	
	    });
		axios({
			url:'goodInfoServlet.action?op=finds',
			method:'get',
			params:{}
		}).then(result=>{
			if(result.data){
				this.goodVOs = result.data;
			}
		});
	},
	methods:{
		add:function(sizeno){
			axios({
				url:'cart.action?op=add',
				method:'get',
				params:{sizeno:sizeno}
			}).then(result=>{ // 请求失败处理
				if(result.data==1){
					alert('添加成功！');
				}else if(result.data==2){
					alert('购物车已有数据，请到购物车中自行添加！');
				}else{
					alert('您可能未登录，添加失败！');
				}
		    });
		}
	}
});
function buy(x){
	axios({
		url:'cart.action?op=add',
		method:'get',
		params:{sizeno:x}
	}).then(result=>{ // 请求失败处理
		if(result.data==1){
			alert('添加成功！');
			location.href="index.html";
		}else if(result.data==2){
			alert('购物车已有数据，请到购物车中自行添加！');
		}else{
			alert('添加失败！');
		}
    });
}
</script>
</body>
</html>
