<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <title>首页</title>
    <link href="css/style.css" type="text/css" rel="stylesheet"/>
    <script src="js/jquery-1.7.min.js" type="text/javascript"></script>
    <script src="js/common.js" type="text/javascript"></script>
    <script>
        $(function () {
            $('a[href*=#],area[href*=#]').click(function () {
                if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
                    var $target = $(this.hash);
                    $target = $target.length && $target || $('[name=' + this.hash.slice(1) + ']');
                    if ($target.length) {
                        var targetOffset = $target.offset().top;
                        $('html,body,.div1').animate({
                            scrollTop: targetOffset
                        }, 1000);
                        return false;
                    }
                }
            });
        })
    </script>
    <script src="/webjars/vue/2.5.16/dist/vue.min.js"></script>
    <script src="/webjars/axios/0.21.1/dist/axios.min.js"></script>
    <script src="js/shop.js"></script>
</head>
<body class="index">
<div id="login-body">
    <login-body></login-body>
</div>
<script>
    let loginVue = new Vue({
        el: "#login-body"
    });
</script>
<div class="head">
    <div class="w1200">
        <div class="logo"><a href="#"></a></div>
        <div class="search">
            <form action="#" class="form">
                <input type="text" name="keyword" class="txt" placeholder="输入商品关键字"/>
                <input type="button" value="搜索" class="sub" onclick="find()"/>
            </form>
        </div>

        <div class="s_r">
            <dl>
                <dt><a href="shopcar.html">购物车<p></p></a></dt>
                <dd>客服电话：<b>400-0139-038</b></dd>
            </dl>
        </div>
        <div class="clear"></div>
    </div>
</div>
<div id="index-body">
    <div class="menu">
        <div class="w1200">
            <div class="item" id="nav"><a href="#" class="nav" onclick="find()">全部商品分类</a>
                <div class="nav_son" style="min-height: 85px;">
                    <ul>
                        <li class="li01" v-for="value in types" v-if="value.status==1">
                            <a :href="'product.html#tnos='+value.tno">{{ value.tname}}</a>
                        </li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <script type="text/javascript">
        $(document).ready(function (e) {

            $('#slider li').eq(0).show();
            var lenThumb = $('#slider li').length;
            for (var i = 1; i <= lenThumb; i++) {
                $('#num').append('<span>' + i + '</span>');
            }
            $('#num span').eq(0).addClass('on');
            var len = $('#num span').length;
            var index = 0;

            $('#num span').click(function () {
                index = $('#num span').index(this);
                picShow(index);
            });
            var playPic = setInterval(function () {
                picShow(index);
                index++;
                if (index == len) {
                    index = 0
                }
            }, 3000);

            function picShow(i) {
                $('#slider li').eq(i).stop(true, true).fadeIn().siblings().fadeOut();
                $('#num > span').eq(i).addClass('on').siblings().removeClass('on');
            }

        });
    </script>
    <div class="banner">
        <ul id="slider">
            <li style="background:url(images/home/banner.jpg) no-repeat center;height:100%;width:100%;"><a href="#"></a>
            </li>
            <li style="background:url(images/home/banner1.jpg) no-repeat center;height:100%;width:100%;"><a
                    href="#"></a>
            </li>
            <li style="background:url(images/home/banner2.jpg) no-repeat center;height:100%;width:100%;"><a
                    href="#"></a>
            </li>
        </ul>

        <div class="w_auto">
            <div class="clearfix"></div>
            <div id="num" class="point"></div>
        </div>
    </div>

    <div class="w1201">
        <a name="a01"></a>
        <div class="idx01">
            <div class="rollBox">
                <dl>
                    <dt><b>限时抢购</b><span>让生活精彩不停</span>
                        <p><img onMouseDown="ISL_GoDown()" onMouseUp="ISL_StopDown()" onMouseOut="ISL_StopDown()"
                                class="img1" src="images/home/ico13.jpg" width="23" height="23"/>
                            <img onmousedown="ISL_GoUp()" onMouseUp="ISL_StopUp()" onMouseOut="ISL_StopUp()"
                                 class="img2"
                                 src="images/home/ico14.jpg" width="23" height="23"/></p></dt>
                    <dd>
                        <div class="Cont" id="ISL_Cont">
                            <div class="ScrCont">
                                <div id="List1">
                                    <!-- 图片列表 begin -->
                                    <ul>
                                        <li class="pic">
                                            <p class="p01">电脑维修</p>
                                            <p class="p02">
                                                <font>￥</font><b style="font-size:20px;">20元上门费</b><br/>
                                                <span>24小时内上门服务<br/>tel:15151031612</span>
                                                <a href="javascript:void(0)" class="buy" onclick="buy(1)">立即预约 ></a>
                                            </p>
                                            <img height="185px" width="150px" src="images/img/img.png"/>
                                        </li>
                                        <li class="pic">
                                            <p class="p01">数据恢复</p>
                                            <p class="p02">
                                                <font>￥</font><b style="font-size:20px;">30元上门费</b><br/>
                                                <span>12小时内上门服务<br/>tel:15413541554</span>
                                                <a href="javascript:void(0)" class="buy" onclick="buy(2)">立即预约 ></a>
                                            </p>
                                            <img height="185px" width="150px" src="images/img/img3.png"/>
                                        </li>
                                        <li class="pic">
                                            <p class="p01">系统重装</p>
                                            <p class="p02">
                                                <font>￥</font><b style="font-size:20px;">10元上门费</b><br/>
                                                <span>48小时内上门服务<br/>tel:15616516516</span>
                                                <a href="javascript:void(0)" class="buy" onclick="buy(3)">立即预约 ></a>
                                            </p>
                                            <img src="images/img/img2.png" height="185px" width="150px"/>
                                        </li>
                                    </ul>

                                    <!-- 图片列表 end -->
                                </div>
                                <div id="List2"></div>
                            </div>
                        </div>
                    </dd>
                </dl>
            </div>
        </div>

        <a name="a02"></a>

        <div class="idx02" v-for="(type,index) in types" v-if="type.status==1">
            <dl>
                <dt>{{ type.tname }}</dt>
                <dd style="padding-left: 0px;">
                    <div style="padding: 0;width:599px;" class="item big">
                        <img style="right: 0px;" :src="type.pic" height="280px" width="599px"/>
                    </div>
                    <div v-for="good in goodVOs" v-if="good.goodInfo.goodType.tno==type.tno">
                        <div class="item">
                            <a :href="'product_show.html#'+good.goodInfo.gno"
                               class="title">{{good.goodInfo.gname}}&nbsp;{{good.size}}</a>
                            <p><font>￥</font>{{good.price}}.<font>00</font></p>
                            <a href="javascript:void(0)" @click="add(good.sizeno)" class="buy"></a>
                            <img :src="good.showPic" height="185px" width="150px"/>
                        </div>
                    </div>
                    <div class="clear"></div>
                </dd>
            </dl>
        </div>
    </div>
</div>
<!--footer-->
<div id="footer-body">
    <footer-body></footer-body>
</div>
<script>
    let footerVue = new Vue({
        el: "#footer-body"
    });
</script>
<!--float_right-->
<div class="float">
    <ul>
        <li><a href="shopcar.html" class="a01"></a></li>
    </ul>
</div>
<!--float_left-->
<div class="float2">
    <ul>
        <li><a href="#a01" class="a01 on" id="idx01">限时抢购</a></li>
        <li><a href="#a02" class="a02" id="idx02"></a></li>
        <li><a href="#a03" class="a03" id="idx03"></a></li>
        <li><a href="#a04" class="a04" id="idx04"></a></li>
        <li><a href="#a05" class="a05" id="idx05"></a></li>
        <li><a href="#a06" class="a06" id="idx06"></a></li>
    </ul>
</div>
<script language="javascript" type="text/javascript">
    $(function () {
        var dv = $(".idx01").offset().top;

        var dv3 = $("#idx03").offset().top;
        var dv4 = $("#idx04").offset().top;
        var dv5 = $("#idx05").offset().top;
        var dv6 = $("#idx06").offset().top;
        window.onscroll = function () {
            if (dv < document.body.scrollTop) {
                $(".float2 a").removeClass("on");
                $(".float2 .a01").addClass("on");

            }

            if (dv3 < document.body.scrollTop) {
                $(".float2 a").removeClass("on");
                $(".float2 .a03").addClass("on");
            }
            if (dv4 < document.body.scrollTop) {
                $(".float2 a").removeClass("on");
                $(".float2 .a04").addClass("on");
            }
            if (dv5 < document.body.scrollTop) {
                $(".float2 a").removeClass("on");
                $(".float2 .a05").addClass("on");
            }
            if (dv6 < document.body.scrollTop) {
                $(".float2 a").removeClass("on");
                $(".float2 .a06").addClass("on");
            }
        }
    });
</script>
<script language="javascript" type="text/javascript">
    <!--//--><![CDATA[//><!--
    //图片滚动列表 mengjia 070816
    var Speed = 10; //速度(毫秒)
    var Space = 10; //每次移动(px)
    var PageWidth = 404; //翻页宽度
    var fill = 0; //整体移位
    var MoveLock = false;
    var MoveTimeObj;
    var Comp = 0;
    var AutoPlayObj = null;
    GetObj("List2").innerHTML = GetObj("List1").innerHTML;
    GetObj('ISL_Cont').scrollLeft = fill;
    GetObj("ISL_Cont").onmouseover = function () {
        clearInterval(AutoPlayObj);
    }
    GetObj("ISL_Cont").onmouseout = function () {
        AutoPlay();
    }
    AutoPlay();

    function GetObj(objName) {
        if (document.getElementById) {
            return eval('document.getElementById("' + objName + '")')
        } else {
            return eval

            ('document.all.' + objName)
        }
    }

    function AutoPlay() { //自动滚动
        clearInterval(AutoPlayObj);
        AutoPlayObj = setInterval('ISL_GoDown();ISL_StopDown();', 5000); //间隔时间
    }

    function ISL_GoUp() { //上翻开始
        if (MoveLock) return;
        clearInterval(AutoPlayObj);
        MoveLock = true;
        MoveTimeObj = setInterval('ISL_ScrUp();', Speed);
    }

    function ISL_StopUp() { //上翻停止
        clearInterval(MoveTimeObj);
        if (GetObj('ISL_Cont').scrollLeft % PageWidth - fill != 0) {
            Comp = fill - (GetObj('ISL_Cont').scrollLeft % PageWidth);
            CompScr();
        } else {
            MoveLock = false;
        }
        AutoPlay();
    }

    function ISL_ScrUp() { //上翻动作
        if (GetObj('ISL_Cont').scrollLeft <= 0) {
            GetObj('ISL_Cont').scrollLeft = GetObj

            ('ISL_Cont').scrollLeft + GetObj('List1').offsetWidth
        }
        GetObj('ISL_Cont').scrollLeft -= Space;
    }

    function ISL_GoDown() { //下翻
        clearInterval(MoveTimeObj);
        if (MoveLock) return;
        clearInterval(AutoPlayObj);
        MoveLock = true;
        ISL_ScrDown();
        MoveTimeObj = setInterval('ISL_ScrDown()', Speed);
    }

    function ISL_StopDown() { //下翻停止
        clearInterval(MoveTimeObj);
        if (GetObj('ISL_Cont').scrollLeft % PageWidth - fill != 0) {
            Comp = PageWidth - GetObj('ISL_Cont').scrollLeft % PageWidth + fill;
            CompScr();
        } else {
            MoveLock = false;
        }
        AutoPlay();
    }

    function ISL_ScrDown() { //下翻动作
        if (GetObj('ISL_Cont').scrollLeft >= GetObj('List1').scrollWidth) {
            GetObj('ISL_Cont').scrollLeft =

                GetObj('ISL_Cont').scrollLeft - GetObj('List1').scrollWidth;
        }
        GetObj('ISL_Cont').scrollLeft += Space;
    }

    function CompScr() {
        var num;
        if (Comp == 0) {
            MoveLock = false;
            return;
        }
        if (Comp < 0) { //上翻
            if (Comp < -Space) {
                Comp += Space;
                num = Space;
            } else {
                num = -Comp;
                Comp = 0;
            }
            GetObj('ISL_Cont').scrollLeft -= num;
            setTimeout('CompScr()', Speed);
        } else { //下翻
            if (Comp > Space) {
                Comp -= Space;
                num = Space;
            } else {
                num = Comp;
                Comp = 0;
            }
            GetObj('ISL_Cont').scrollLeft += num;
            setTimeout('CompScr()', Speed);
        }
    }

    //--><!]]>
</script>
<script type="text/javascript">
    function find() {
        let keyword = $.trim($('input[name="keyword"]').val());
        let tnos = new Array();
        let params = new URLSearchParams();
        params.append("tname", keyword);
        axios.post("shop-goodr/findGoodType", params).then(result => {
            if (result.data.code == 1) {
                tnos = result.data.data;
                let str_tnos = tnos.join(",");
                location.href = "product.html?tnos=" + str_tnos;
            }
        }).catch(error => {
            alert(error);
        });
    }

    let indexVue = new Vue({
        el: "#index-body",
        data: {
            types: [],
            goodVOs: []
        },
        created: function () {
            window.buy = this.add;
            axios.post("findAllType").then(res => {
                if (res.data.code == 1) {
                    this.types = res.data.data;
                }
            }).catch(error => {
                alert(error);
            });
            axios.post("findsSixInfo").then(res => {
                if (res.data.code == 1) {
                    this.goodVOs = res.data.data;
                }
            }).catch(error => {
                alert(error);
            });
        },
        methods: {
            add: function (sizeno) {
                let params = new URLSearchParams();
                params.append("sizeno", sizeno);
                axios.post('shop-cart/addCart', params).then(result => { // 请求失败处理
                    if (result.data.code == 1) {
                        alert('添加成功！');
                    } else {
                        alert(result.data.msg);
                    }
                });
            }
        }
    });
</script>
</body>
</html>
